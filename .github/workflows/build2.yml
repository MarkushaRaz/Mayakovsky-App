name: Windows EXE Build (32-bit)

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  build:
    runs-on: windows-latest

    steps:
      - name: üì• –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
        uses: actions/checkout@v3

      - name: üîß –°–∫–∞—á–∏–≤–∞–µ–º –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º 32-–±–∏—Ç–Ω—ã–π MinGW
        run: |
          Invoke-WebRequest -Uri "https://downloads.sourceforge.net/mingw-w64/i686-12.2.0-release-win32-sjlj.zip" -OutFile "mingw32.zip"
          Expand-Archive mingw32.zip -DestinationPath "C:\mingw32"
          echo "C:\mingw32\mingw32\bin" | Out-File -FilePath $env:GITHUB_PATH -Encoding utf8

      - name: üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä
        run: |
          i686-w64-mingw32-g++ --version

      - name: üõ†Ô∏è –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º 32-–±–∏—Ç–Ω—ã–π EXE
        run: |
          i686-w64-mingw32-g++ build/main.cpp -o Mayakovsky-32.exe -static -mconsole
          ls -lah

      - name: üì§ –ó–∞–≥—Ä—É–∂–∞–µ–º 32-–±–∏—Ç–Ω—ã–π EXE
        uses: actions/upload-artifact@v4
        with:
          name: Mayakovsky-32
          path: Mayakovsky-32.exe
