name: Windows EXE Build (32-bit)

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  build:
    runs-on: windows-latest

    steps:
      - name: üì• –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
        uses: actions/checkout@v3

      - name: üîß –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Scoop –∏ 32-–±–∏—Ç–Ω—ã–π MinGW
        run: |
          irm get.scoop.sh | iex
          scoop install mingw
          echo "C:\Users\runneradmin\scoop\shims" >> $GITHUB_PATH

      - name: üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä
        run: |
          gcc --version

      - name: üõ†Ô∏è –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º 32-–±–∏—Ç–Ω—ã–π EXE
        run: |
          gcc build/main.cpp -o Mayakovsky-32.exe -static -mconsole -m32
          ls -lah

      - name: üì§ –ó–∞–≥—Ä—É–∂–∞–µ–º 32-–±–∏—Ç–Ω—ã–π EXE
        uses: actions/upload-artifact@v4
        with:
          name: Mayakovsky-32
          path: Mayakovsky-32.exe
